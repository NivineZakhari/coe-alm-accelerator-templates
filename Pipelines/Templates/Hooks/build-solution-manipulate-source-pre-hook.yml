# The step(s) below can be replaced with your custom steps. You must have at least one step in your hook. The step(s) below demonstrate examples of custom hooks.
# Be sure when upgrading to the latest pipelines that you don't overwrite your custom hooks with these samples hooks
# Parameters passed to the parent pipeline (build-Solution.yml) can be accessed via the following command.
# . "$env:POWERSHELLPATH/load-save-pipeline-parameters.ps1"
# $parameters = Read-Pipeline-Parameters "$(Agent.BuildDirectory)\build-pipeline-parameters.json"
steps:
  - script: echo Build Solution Pre Hook
    displayName: 'Build Solution Pre Hook'
    enabled: false
  - pwsh: |
        . "$env:POWERSHELLPATH/load-save-pipeline-parameters.ps1"
        Write-Host "Loading pipeline parameters from $(Agent.BuildDirectory)\build-pipeline-parameters.json"
        $parameters = Read-Pipeline-Parameters "$(Agent.BuildDirectory)\build-pipeline-parameters.json"
        $solutionName = $parameters.solutionName
        Write-Host "##vso[task.setvariable variable=PreBuild.SolutionName]$solutionName"
    displayName: 'Set Solution Variable'

  - template: CustomTemplates\FocusCenterPRChecker\pr-checker.yml
    parameters:
      checkduplicatecomponents: 'true'
      checkduplicateconnectionreferences: 'true'
      checklastupdatedprocessfield: 'false'
      checkmissingconnectionreferences: 'true'
      checkpublisher: 'true'
      checksecurityroles: 'true'
      checksolutionversion: 'true'
      enablecommentstopullrequest: 'true'
      flowauditingattribute: ''
      masterbranchname: 'main'
      solutionpublisheroptionvalueprefix: '80906'
      solutionpublisherprefix: 'foo'
      solutionpublisheruniquename: 'bar'
      solutionsrepopath: $(PreBuild.SolutionName)/SolutionPackage
